(window.webpackJsonp=window.webpackJsonp||[]).push([[75],{376:function(s,a,n){"use strict";n.r(a);var t=n(10),e=Object(t.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"通用vue组件发布至-npm"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#通用vue组件发布至-npm"}},[s._v("#")]),s._v(" 通用"),a("code",[s._v("Vue")]),s._v("组件发布至 npm")]),s._v(" "),a("p",[s._v("发布"),a("code",[s._v("vue")]),s._v("通用组件说明文档")]),s._v(" "),a("h2",{attrs:{id:"package-json-文档说明"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#package-json-文档说明"}},[s._v("#")]),s._v(" "),a("code",[s._v("package.json")]),s._v(" 文档说明")]),s._v(" "),a("ul",[a("li",[a("code",[s._v("main")]),s._v("： 编译后的 "),a("code",[s._v("commonJS")]),s._v(" 规范代码入口")]),s._v(" "),a("li",[a("code",[s._v("module")]),s._v("： 编译后的 "),a("code",[s._v("ES6模块")]),s._v(" 规范代码入口")]),s._v(" "),a("li",[a("code",[s._v("files")]),s._v(":  配置发布包含文件")]),s._v(" "),a("li",[a("code",[s._v("scripts")]),s._v(":  添加 "),a("code",[s._v('"prepublishOnly": "npm run build"')]),s._v(" 发布时自动打包")]),s._v(" "),a("li",[a("code",[s._v("repository")]),s._v(":  指定你的代码存放的地方")]),s._v(" "),a("li",[a("code",[s._v("publishConfig")]),s._v(": "),a("code",[s._v("npm public")]),s._v(" 时配置集合，可配置 "),a("code",[s._v("tag")]),s._v(", "),a("code",[s._v("registry")]),s._v("和"),a("code",[s._v("access")])]),s._v(" "),a("li",[a("code",[s._v("private")]),s._v(":  设置为 "),a("code",[s._v("true")]),s._v(" 时， 不发布")])]),s._v(" "),a("h2",{attrs:{id:"vue-sfc-rollup-使用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#vue-sfc-rollup-使用"}},[s._v("#")]),s._v(" "),a("code",[s._v("vue-sfc-rollup")]),s._v(" 使用")]),s._v(" "),a("blockquote",[a("p",[a("code",[s._v("vue-sfc-rollup")]),s._v("  用于发布Vue文件组件(库)至 npm 的模板 CLI 工具， 采用 rollup 打包")])]),s._v(" "),a("ul",[a("li",[s._v("全局使用")])]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 全局安装")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-g")]),s._v(" vue-sfc-rollup\nsfc-init\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("ul",[a("li",[s._v("使用 "),a("code",[s._v("npx")]),s._v(" 本地调用")])]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 无需安装，直接调用")]),s._v("\nnpx vue-sfc-rollup\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("ul",[a("li",[s._v("目录说明")])]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v("\n├── build\n│   └── rollup.config.js  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# rollup 配置文件")]),s._v("\n├── package.json \n└── src\n    ├── entry.js "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# rollup 打包入口文件")]),s._v("\n    └── test-vue.vue "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 要发布的 vue 组件")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])]),a("h2",{attrs:{id:"npm-源"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#npm-源"}},[s._v("#")]),s._v(" npm 源")]),s._v(" "),a("h3",{attrs:{id:"npm-yarn查看源和换源"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#npm-yarn查看源和换源"}},[s._v("#")]),s._v(" "),a("code",[s._v("npm")]),s._v(", "),a("code",[s._v("yarn")]),s._v("查看源和换源")]),s._v(" "),a("ul",[a("li",[s._v("全局配置")])]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" config get registry  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看npm当前镜像源")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" config "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" registry https://registry.npm.taobao.org/  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 设置npm镜像源为淘宝镜像")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("yarn")]),s._v(" config get registry  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看yarn当前镜像源")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("yarn")]),s._v(" config "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" registry https://registry.npm.taobao.org/  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 设置yarn镜像源为淘宝镜像")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])]),a("ul",[a("li",[a("p",[s._v("在当前文件夹下新建 "),a("code",[s._v(".npmrc")]),s._v(" 文件，并添加 "),a("code",[s._v("registry=https://registry.npmjs.org/")]),s._v("，只作用于当前文件夹")])]),s._v(" "),a("li",[a("p",[s._v("临时使用， 命令中添加 "),a("code",[s._v("--registry https://registry.npmjs.org/")])])])]),s._v(" "),a("h3",{attrs:{id:"镜像源地址"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#镜像源地址"}},[s._v("#")]),s._v(" 镜像源地址")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# npm")]),s._v("\nhttps://registry.npmjs.org/\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# taobao")]),s._v("\nhttps://registry.npm.taobao.org/\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("h2",{attrs:{id:"发布npm包"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#发布npm包"}},[s._v("#")]),s._v(" 发布npm包")]),s._v(" "),a("ol",[a("li",[a("p",[s._v("登录")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 已配置默认源")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" login\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 指定登录源")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" login "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--registry")]),s._v(" http://repository.npmjs.org/\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 或添加用户")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" adduser "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--registry")]),s._v(" http://repository.npmjs.org/\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 输入账号密码")]),s._v("\nUsername: edpadmin\nPassword: edpadmin\nEmail: "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("this IS public"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" edpadmin@xmi01.com\nLogged "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" as edpadmin on http://repository.npmjs.org/\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("发布")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 已配置默认源")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" publish\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 指定发布源")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" publish "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--registry")]),s._v(" http://repository.npmjs.org/\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# package.json 中指定")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"publishConfig"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"registry"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" http://repository.npmjs.org/\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(",\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br")])])])]),s._v(" "),a("h2",{attrs:{id:"弃用npm包"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#弃用npm包"}},[s._v("#")]),s._v(" 弃用npm包")]),s._v(" "),a("ul",[a("li",[a("code",[s._v("npm-deprecate")])]),s._v(" "),a("li",[a("code",[s._v("npx force-unpublish package-name '原因描述'")])])]),s._v(" "),a("h2",{attrs:{id:"注意事项"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#注意事项"}},[s._v("#")]),s._v(" 注意事项")]),s._v(" "),a("ul",[a("li",[s._v("发布版本为使用 "),a("code",[s._v("bable")]),s._v(" 转义后的 "),a("code",[s._v("ES5")]),s._v(" 语法代码")]),s._v(" "),a("li",[s._v("发布前注意先打包")]),s._v(" "),a("li",[s._v("添加 "),a("code",[s._v("readme.md")]),s._v(" 说明文档")])]),s._v(" "),a("h2",{attrs:{id:"参考"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#参考"}},[s._v("#")]),s._v(" 参考")]),s._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://github.com/team-innovation/vue-sfc-rollup",target:"_blank",rel:"noopener noreferrer"}},[s._v("vue-sfc-rollup"),a("OutboundLink")],1)]),s._v(" "),a("li",[a("a",{attrs:{href:"https://cn.vuejs.org/v2/cookbook/packaging-sfc-for-npm.html#Packaging-Components-for-npm",target:"_blank",rel:"noopener noreferrer"}},[s._v("Packaging-Components-for-npm"),a("OutboundLink")],1)])])])}),[],!1,null,null,null);a.default=e.exports}}]);
<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>JS 垃圾回收 | 炫</title>
    <meta name="generator" content="VuePress 1.9.10">
    <link rel="shortcut icon" href="/Notes/favicon.ico">
    <meta name="description" content="学习笔记">
    
    <link rel="preload" href="/Notes/assets/css/0.styles.a503b4b5.css" as="style"><link rel="preload" href="/Notes/assets/js/app.e773d1be.js" as="script"><link rel="preload" href="/Notes/assets/js/2.6c1319ac.js" as="script"><link rel="preload" href="/Notes/assets/js/1.5a5e16a8.js" as="script"><link rel="preload" href="/Notes/assets/js/46.ceb4dbec.js" as="script"><link rel="prefetch" href="/Notes/assets/js/10.1c9f2fcc.js"><link rel="prefetch" href="/Notes/assets/js/11.404b6dda.js"><link rel="prefetch" href="/Notes/assets/js/12.8da9548f.js"><link rel="prefetch" href="/Notes/assets/js/13.9be5c86a.js"><link rel="prefetch" href="/Notes/assets/js/14.53d3cf59.js"><link rel="prefetch" href="/Notes/assets/js/15.75d75712.js"><link rel="prefetch" href="/Notes/assets/js/16.bd61cf89.js"><link rel="prefetch" href="/Notes/assets/js/17.8b0b4db8.js"><link rel="prefetch" href="/Notes/assets/js/18.af740b3c.js"><link rel="prefetch" href="/Notes/assets/js/19.ff5e04bd.js"><link rel="prefetch" href="/Notes/assets/js/20.95338826.js"><link rel="prefetch" href="/Notes/assets/js/21.5f7e0bd2.js"><link rel="prefetch" href="/Notes/assets/js/22.e3996465.js"><link rel="prefetch" href="/Notes/assets/js/23.dd42961e.js"><link rel="prefetch" href="/Notes/assets/js/24.89e60f09.js"><link rel="prefetch" href="/Notes/assets/js/25.4a1ec1d8.js"><link rel="prefetch" href="/Notes/assets/js/26.045196da.js"><link rel="prefetch" href="/Notes/assets/js/27.1cf9d36e.js"><link rel="prefetch" href="/Notes/assets/js/28.5ddc9df5.js"><link rel="prefetch" href="/Notes/assets/js/29.51c5345f.js"><link rel="prefetch" href="/Notes/assets/js/3.28fa5fee.js"><link rel="prefetch" href="/Notes/assets/js/30.2c775243.js"><link rel="prefetch" href="/Notes/assets/js/31.fa601e01.js"><link rel="prefetch" href="/Notes/assets/js/32.8209b8f7.js"><link rel="prefetch" href="/Notes/assets/js/33.b7788b0b.js"><link rel="prefetch" href="/Notes/assets/js/34.ac12cb38.js"><link rel="prefetch" href="/Notes/assets/js/35.fa00fb0e.js"><link rel="prefetch" href="/Notes/assets/js/36.5a128296.js"><link rel="prefetch" href="/Notes/assets/js/37.ae8a1c66.js"><link rel="prefetch" href="/Notes/assets/js/38.01c876b6.js"><link rel="prefetch" href="/Notes/assets/js/39.a430279f.js"><link rel="prefetch" href="/Notes/assets/js/4.44e53d48.js"><link rel="prefetch" href="/Notes/assets/js/40.58245cee.js"><link rel="prefetch" href="/Notes/assets/js/41.6fa137a6.js"><link rel="prefetch" href="/Notes/assets/js/42.f5986218.js"><link rel="prefetch" href="/Notes/assets/js/43.908dc8b0.js"><link rel="prefetch" href="/Notes/assets/js/44.73cea0c2.js"><link rel="prefetch" href="/Notes/assets/js/45.875c8f46.js"><link rel="prefetch" href="/Notes/assets/js/47.dcb12197.js"><link rel="prefetch" href="/Notes/assets/js/48.ded3fb9e.js"><link rel="prefetch" href="/Notes/assets/js/49.54e94820.js"><link rel="prefetch" href="/Notes/assets/js/5.ebf595b6.js"><link rel="prefetch" href="/Notes/assets/js/50.63e48f48.js"><link rel="prefetch" href="/Notes/assets/js/51.7e4af462.js"><link rel="prefetch" href="/Notes/assets/js/52.d61ec835.js"><link rel="prefetch" href="/Notes/assets/js/53.836cb30f.js"><link rel="prefetch" href="/Notes/assets/js/54.77747ea5.js"><link rel="prefetch" href="/Notes/assets/js/55.a45498b2.js"><link rel="prefetch" href="/Notes/assets/js/56.31d8650e.js"><link rel="prefetch" href="/Notes/assets/js/57.d54105aa.js"><link rel="prefetch" href="/Notes/assets/js/58.b0780471.js"><link rel="prefetch" href="/Notes/assets/js/59.d38165d1.js"><link rel="prefetch" href="/Notes/assets/js/60.4ce717da.js"><link rel="prefetch" href="/Notes/assets/js/61.90977508.js"><link rel="prefetch" href="/Notes/assets/js/62.8b0b1429.js"><link rel="prefetch" href="/Notes/assets/js/63.6f6c7222.js"><link rel="prefetch" href="/Notes/assets/js/64.db097337.js"><link rel="prefetch" href="/Notes/assets/js/65.65641ee2.js"><link rel="prefetch" href="/Notes/assets/js/66.495b0673.js"><link rel="prefetch" href="/Notes/assets/js/67.897dec6e.js"><link rel="prefetch" href="/Notes/assets/js/68.a81e7e12.js"><link rel="prefetch" href="/Notes/assets/js/69.23e234f4.js"><link rel="prefetch" href="/Notes/assets/js/70.62cdfd23.js"><link rel="prefetch" href="/Notes/assets/js/71.e5d44f88.js"><link rel="prefetch" href="/Notes/assets/js/72.8d2fdbec.js"><link rel="prefetch" href="/Notes/assets/js/73.77e0a646.js"><link rel="prefetch" href="/Notes/assets/js/74.687023c7.js"><link rel="prefetch" href="/Notes/assets/js/75.6ed234fd.js"><link rel="prefetch" href="/Notes/assets/js/76.4f7e47ca.js"><link rel="prefetch" href="/Notes/assets/js/77.9ba5a8c9.js"><link rel="prefetch" href="/Notes/assets/js/78.020b2f81.js"><link rel="prefetch" href="/Notes/assets/js/79.8495e8f1.js"><link rel="prefetch" href="/Notes/assets/js/8.c2996aad.js"><link rel="prefetch" href="/Notes/assets/js/80.3f2bcc6a.js"><link rel="prefetch" href="/Notes/assets/js/81.c2d2ec54.js"><link rel="prefetch" href="/Notes/assets/js/82.2c144b55.js"><link rel="prefetch" href="/Notes/assets/js/83.29890e79.js"><link rel="prefetch" href="/Notes/assets/js/84.00371102.js"><link rel="prefetch" href="/Notes/assets/js/9.c7108ba4.js"><link rel="prefetch" href="/Notes/assets/js/vendors~docsearch.649f9bfd.js">
    <link rel="stylesheet" href="/Notes/assets/css/0.styles.a503b4b5.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/Notes/" class="home-link router-link-active"><img src="/Notes/logo.png" alt="炫" class="logo"> <span class="site-name can-hide">炫</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/Notes/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><span class="title">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Notes/HTML-CSS/HTML.html" class="nav-link">
  HTML CSS
</a></li><li class="dropdown-item"><!----> <a href="/Notes/JavaScript/API.html" class="nav-link">
  JavaScript
</a></li><li class="dropdown-item"><!----> <a href="/Notes/TypeScript/index.html" class="nav-link">
  TypeScript
</a></li><li class="dropdown-item"><!----> <a href="/Notes/Vue/index.html" class="nav-link">
  Vue
</a></li><li class="dropdown-item"><!----> <a href="/Notes/React/index.html" class="nav-link">
  React
</a></li><li class="dropdown-item"><!----> <a href="/Notes/MiniProgram/index.html" class="nav-link">
  小程序
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="后端" class="dropdown-title"><span class="title">后端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Notes/Node/index.html" class="nav-link">
  Node
</a></li><li class="dropdown-item"><!----> <a href="/Notes/Deno/index.html" class="nav-link">
  Deno
</a></li><li class="dropdown-item"><!----> <a href="/Notes/Python/index.html" class="nav-link">
  Python
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="数据库" class="dropdown-title"><span class="title">数据库</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Notes/MySQL/index.html" class="nav-link">
  MySQL
</a></li><li class="dropdown-item"><!----> <a href="/Notes/MongoDB/index.html" class="nav-link">
  MongoDB
</a></li></ul></div></div><div class="nav-item"><a href="/Notes/other/index.html" class="nav-link">
  文档
</a></div> <a href="https://github.com/xuan-zhang/Notes" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/Notes/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><span class="title">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Notes/HTML-CSS/HTML.html" class="nav-link">
  HTML CSS
</a></li><li class="dropdown-item"><!----> <a href="/Notes/JavaScript/API.html" class="nav-link">
  JavaScript
</a></li><li class="dropdown-item"><!----> <a href="/Notes/TypeScript/index.html" class="nav-link">
  TypeScript
</a></li><li class="dropdown-item"><!----> <a href="/Notes/Vue/index.html" class="nav-link">
  Vue
</a></li><li class="dropdown-item"><!----> <a href="/Notes/React/index.html" class="nav-link">
  React
</a></li><li class="dropdown-item"><!----> <a href="/Notes/MiniProgram/index.html" class="nav-link">
  小程序
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="后端" class="dropdown-title"><span class="title">后端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Notes/Node/index.html" class="nav-link">
  Node
</a></li><li class="dropdown-item"><!----> <a href="/Notes/Deno/index.html" class="nav-link">
  Deno
</a></li><li class="dropdown-item"><!----> <a href="/Notes/Python/index.html" class="nav-link">
  Python
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="数据库" class="dropdown-title"><span class="title">数据库</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Notes/MySQL/index.html" class="nav-link">
  MySQL
</a></li><li class="dropdown-item"><!----> <a href="/Notes/MongoDB/index.html" class="nav-link">
  MongoDB
</a></li></ul></div></div><div class="nav-item"><a href="/Notes/other/index.html" class="nav-link">
  文档
</a></div> <a href="https://github.com/xuan-zhang/Notes" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>JavaScript</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/Notes/JavaScript/API.html" class="sidebar-link">JavaScript 笔记</a></li><li><a href="/Notes/JavaScript/Axios Ajax Fetch.html" class="sidebar-link">axios 请求封装</a></li><li><a href="/Notes/JavaScript/Promise.html" class="sidebar-link">promise</a></li><li><a href="/Notes/JavaScript/Workers.html" class="sidebar-link">webworker 与 serviceWorker</a></li><li><a href="/Notes/JavaScript/blob base64 与 file转换.html" class="sidebar-link">blob base64 与 file 格式转换</a></li><li><a href="/Notes/JavaScript/call apply bind.html" class="sidebar-link">call, apply, bind 区别</a></li><li><a href="/Notes/JavaScript/jQuery.html" class="sidebar-link">jQuery 笔记</a></li><li><a href="/Notes/JavaScript/let const var.html" class="sidebar-link">let const var</a></li><li><a href="/Notes/JavaScript/listToTree.html" class="sidebar-link">List To Tree</a></li><li><a href="/Notes/JavaScript/script标签中的defer与async.html" class="sidebar-link">script 标签中 async 与 defer 的区别</a></li><li><a href="/Notes/JavaScript/stoarge.html" class="sidebar-link">localStorage sessionStorage 封装</a></li><li><a href="/Notes/JavaScript/webpack.html" class="sidebar-link">webpack</a></li><li><a href="/Notes/JavaScript/websock.html" class="sidebar-link">WebSockets</a></li><li><a href="/Notes/JavaScript/事件.html" class="sidebar-link">事件</a></li><li><a href="/Notes/JavaScript/原型与原型链.html" class="sidebar-link">原型与原型链</a></li><li><a href="/Notes/JavaScript/垃圾回收机制.html" class="active sidebar-link">JS 垃圾回收</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Notes/JavaScript/垃圾回收机制.html#思路" class="sidebar-link">思路</a></li><li class="sidebar-sub-header"><a href="/Notes/JavaScript/垃圾回收机制.html#标记清理-mark-and-sweep" class="sidebar-link">标记清理(mark-and-sweep)</a></li><li class="sidebar-sub-header"><a href="/Notes/JavaScript/垃圾回收机制.html#引用计数-reference-counting" class="sidebar-link">引用计数(（reference counting)</a></li><li class="sidebar-sub-header"><a href="/Notes/JavaScript/垃圾回收机制.html#性能" class="sidebar-link">性能</a></li><li class="sidebar-sub-header"><a href="/Notes/JavaScript/垃圾回收机制.html#内存管理" class="sidebar-link">内存管理</a></li><li class="sidebar-sub-header"><a href="/Notes/JavaScript/垃圾回收机制.html#内存泄漏" class="sidebar-link">内存泄漏</a></li><li class="sidebar-sub-header"><a href="/Notes/JavaScript/垃圾回收机制.html#静态分配与对象池" class="sidebar-link">静态分配与对象池</a></li></ul></li><li><a href="/Notes/JavaScript/安全.html" class="sidebar-link">安全</a></li><li><a href="/Notes/JavaScript/数据结构.html" class="sidebar-link">数据结构</a></li><li><a href="/Notes/JavaScript/数组扁平化方法.html" class="sidebar-link">数组扁平化方法</a></li><li><a href="/Notes/JavaScript/正则.html" class="sidebar-link">正则表达式</a></li><li><a href="/Notes/JavaScript/比较.html" class="sidebar-link">比较</a></li><li><a href="/Notes/JavaScript/类.html" class="sidebar-link">类</a></li><li><a href="/Notes/JavaScript/编写高质量JS的68个有效方案.html" class="sidebar-link">编写高质量JavaScript的68个有效方法</a></li><li><a href="/Notes/JavaScript/网络协议.html" class="sidebar-link">网络协议</a></li><li><a href="/Notes/JavaScript/获取selected选中项.html" class="sidebar-link">获取 select 选种项目</a></li><li><a href="/Notes/JavaScript/跨域.html" class="sidebar-link">跨域</a></li><li><a href="/Notes/JavaScript/错误监控.html" class="sidebar-link">监控</a></li><li><a href="/Notes/JavaScript/闭包.html" class="sidebar-link">闭包</a></li><li><a href="/Notes/JavaScript/防抖与节流.html" class="sidebar-link">防抖与节流</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="js-垃圾回收"><a href="#js-垃圾回收" class="header-anchor">#</a> JS 垃圾回收</h1> <blockquote><p>执行环境负责在代码执行时管理内容<br>
通过自动内存管理实现内存分配和闲置资源回收</p></blockquote> <h2 id="思路"><a href="#思路" class="header-anchor">#</a> 思路</h2> <ul><li>确定哪个环境变量不再使用，然后释放它占用的空间</li> <li>周期性: 即垃圾回收程序每隔一定时间（或者说在代码执
行过程中某个预定的收集时间）就会自动运行</li> <li>近似且不完美的方案: 某块内存是否还有用，属于“不可判定的”问题，意味着靠算法是解决不了的</li> <li>垃圾回收程序必须跟踪记录哪个变量还会使用，以及哪个变量不会再使用，以便回收
内存</li></ul> <h2 id="标记清理-mark-and-sweep"><a href="#标记清理-mark-and-sweep" class="header-anchor">#</a> 标记清理(mark-and-sweep)</h2> <blockquote><p>到了 2008 年，IE、Firefox、Opera、Chrome 和 Safari 都在自己的 JavaScript 实现中采用标记清理（或其变体），只是在运行垃圾回收的频率上有所差异</p></blockquote> <ul><li>当变量进入上下文，比如在函数内部声明一个变量时，这个变量会被加上存在于上下文中的标记</li> <li>在上下文中的变量，逻辑上讲，永远不应该释放它们的内存，因为只要上下文中的代码在运行，就有可能用到它们。</li> <li>当变量离开上下文时，也会被加上离开上下文的标记</li> <li>变量加标记的方式
<ul><li>当变量进入上下文时，反转某一位</li> <li>维护 “在上下文中” 和 “不在上下文中” 两个变量列表,可以把变量从一个列表转移到另一个列表</li></ul></li> <li>垃圾回收程序运行的时候，会<strong>标记</strong>内存中存储的<strong>所有变量</strong>, 它会将所有在上下文中的变量，以及被在上下文中的变量引用的变量的标记<strong>去掉</strong></li> <li>在此之后再被加上标记的变量就是待删除的了，原因是任何在上下文中的变量都访问不到它们了。随后垃圾回收程序做一次<strong>内存清理</strong>，销毁<strong>带标记</strong>的所有值并收回它们的内存</li></ul> <h2 id="引用计数-reference-counting"><a href="#引用计数-reference-counting" class="header-anchor">#</a> 引用计数(（reference counting)</h2> <blockquote><p>不常用</p></blockquote> <ul><li>是对每个值都记录它被引用的次数。声明变量并给它赋一个引用值时，这个值的引用数为 1。如果同一个值又被赋给另一个变量，那么引用数加 1。类似地，如果保存对该值引用的变量被其他值给覆盖了，那么引用数减 1。当一个值的引用数为 0 时，就说明没办法再访问到这个值了，因此可以安全地收回其内存了。垃圾回收程序下次运行的时候就会释放引用数为 0 的值的内存。</li> <li>问题：循环引用。所谓循环引用，就是对象 A 有一个指针指向对象 B，而对象 B 也引用了对象 A</li> <li>把变量设置为 null 实际上会切断变量与其之前引用值之间的关系。当下次垃圾回收程序运行时，这些值就会被删除，内存也会被回收</li></ul> <h2 id="性能"><a href="#性能" class="header-anchor">#</a> 性能</h2> <ul><li>在写代码时就要做到: 无论什么时候开始收集垃圾，都能让它尽快结束工作</li></ul> <h2 id="内存管理"><a href="#内存管理" class="header-anchor">#</a> 内存管理</h2> <ul><li>优化内存占用的最佳手段就是保证在执行代码时只保存必要的数据。如果数据不再必要，那么把它设置为 null，从而释放其引用。这也可以叫
作解除引用。最适合全局变量和全局对象的属性</li> <li>解除对一个值的引用并不会自动导致相关内存被回收。解除引用的关键在于确保相关的值已经不在上下文里了，因此它在下次垃圾回收时会被回收</li> <li>通过 const 和 let 声明提升性能
<ul><li>ES6 增加这两个关键字不仅有助于改善代码风格，而且同样有助于改进垃圾回收的过程</li></ul></li> <li>隐藏类和删除操作
<ul><li>V8 在将解释后的 JavaScript 代码编译为实际的机器码时会利用“隐藏类”</li> <li>运行期间，V8 会将创建的对象与隐藏类关联起来，以跟踪它们的属性特征。能够共享相同隐藏类的对象性能会更好，V8 会针对这种情况进行优化，但不一定总能够做到</li> <li>避免 JavaScript 的“先创建再补充”（ready-fire-aim）式的动态属性赋值，并在构造函数中一次性声明所有属性</li> <li>动态删除属性与动态添加属性导致的后果一样。最佳实践是把不想要的属性设置为 null。这样可以保持隐藏类不变和继续共享，同时也能达到删除引用值供垃圾回收程序回收的效果。</li></ul></li></ul> <h2 id="内存泄漏"><a href="#内存泄漏" class="header-anchor">#</a> 内存泄漏</h2> <ul><li>JavaScript 中的内存泄漏大部分是由不合理的引用导致的</li> <li>意外声明全局变量是最常见但也最容易修复的内存泄漏问题
<ul><li>只要在变量声明前头加上 var、let 或 const 关键字即可，这样变量就会在函数执行完毕后离开作用域</li></ul></li> <li>定时器也可能会悄悄地导致内存泄漏, 定时器的回调通过闭包引用了外部变量</li> <li>使用 JavaScript 闭包很容易在不知不觉间造成内存泄漏</li></ul> <h2 id="静态分配与对象池"><a href="#静态分配与对象池" class="header-anchor">#</a> 静态分配与对象池</h2></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/xuan-zhang/Notes/edit/master/docs/JavaScript/垃圾回收机制.md" target="_blank" rel="noopener noreferrer">在GitHub中编辑此页面！</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">最后更新时间:</span> <span class="time">2021/1/7 17:28:19</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/Notes/JavaScript/原型与原型链.html" class="prev">
        原型与原型链
      </a></span> <span class="next"><a href="/Notes/JavaScript/安全.html">
        安全
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/Notes/assets/js/app.e773d1be.js" defer></script><script src="/Notes/assets/js/2.6c1319ac.js" defer></script><script src="/Notes/assets/js/1.5a5e16a8.js" defer></script><script src="/Notes/assets/js/46.ceb4dbec.js" defer></script>
  </body>
</html>

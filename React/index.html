<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>React | ç‚«</title>
    <meta name="generator" content="VuePress 1.9.10">
    <link rel="shortcut icon" href="/Notes/favicon.ico">
    <meta name="description" content="å­¦ä¹ ç¬”è®°">
    
    <link rel="preload" href="/Notes/assets/css/0.styles.a503b4b5.css" as="style"><link rel="preload" href="/Notes/assets/js/app.e773d1be.js" as="script"><link rel="preload" href="/Notes/assets/js/2.6c1319ac.js" as="script"><link rel="preload" href="/Notes/assets/js/1.5a5e16a8.js" as="script"><link rel="preload" href="/Notes/assets/js/17.8b0b4db8.js" as="script"><link rel="prefetch" href="/Notes/assets/js/10.1c9f2fcc.js"><link rel="prefetch" href="/Notes/assets/js/11.404b6dda.js"><link rel="prefetch" href="/Notes/assets/js/12.8da9548f.js"><link rel="prefetch" href="/Notes/assets/js/13.9be5c86a.js"><link rel="prefetch" href="/Notes/assets/js/14.53d3cf59.js"><link rel="prefetch" href="/Notes/assets/js/15.75d75712.js"><link rel="prefetch" href="/Notes/assets/js/16.bd61cf89.js"><link rel="prefetch" href="/Notes/assets/js/18.af740b3c.js"><link rel="prefetch" href="/Notes/assets/js/19.ff5e04bd.js"><link rel="prefetch" href="/Notes/assets/js/20.95338826.js"><link rel="prefetch" href="/Notes/assets/js/21.5f7e0bd2.js"><link rel="prefetch" href="/Notes/assets/js/22.e3996465.js"><link rel="prefetch" href="/Notes/assets/js/23.dd42961e.js"><link rel="prefetch" href="/Notes/assets/js/24.89e60f09.js"><link rel="prefetch" href="/Notes/assets/js/25.4a1ec1d8.js"><link rel="prefetch" href="/Notes/assets/js/26.045196da.js"><link rel="prefetch" href="/Notes/assets/js/27.1cf9d36e.js"><link rel="prefetch" href="/Notes/assets/js/28.5ddc9df5.js"><link rel="prefetch" href="/Notes/assets/js/29.51c5345f.js"><link rel="prefetch" href="/Notes/assets/js/3.28fa5fee.js"><link rel="prefetch" href="/Notes/assets/js/30.2c775243.js"><link rel="prefetch" href="/Notes/assets/js/31.fa601e01.js"><link rel="prefetch" href="/Notes/assets/js/32.8209b8f7.js"><link rel="prefetch" href="/Notes/assets/js/33.b7788b0b.js"><link rel="prefetch" href="/Notes/assets/js/34.ac12cb38.js"><link rel="prefetch" href="/Notes/assets/js/35.fa00fb0e.js"><link rel="prefetch" href="/Notes/assets/js/36.5a128296.js"><link rel="prefetch" href="/Notes/assets/js/37.ae8a1c66.js"><link rel="prefetch" href="/Notes/assets/js/38.01c876b6.js"><link rel="prefetch" href="/Notes/assets/js/39.a430279f.js"><link rel="prefetch" href="/Notes/assets/js/4.44e53d48.js"><link rel="prefetch" href="/Notes/assets/js/40.58245cee.js"><link rel="prefetch" href="/Notes/assets/js/41.6fa137a6.js"><link rel="prefetch" href="/Notes/assets/js/42.f5986218.js"><link rel="prefetch" href="/Notes/assets/js/43.908dc8b0.js"><link rel="prefetch" href="/Notes/assets/js/44.73cea0c2.js"><link rel="prefetch" href="/Notes/assets/js/45.875c8f46.js"><link rel="prefetch" href="/Notes/assets/js/46.ceb4dbec.js"><link rel="prefetch" href="/Notes/assets/js/47.dcb12197.js"><link rel="prefetch" href="/Notes/assets/js/48.ded3fb9e.js"><link rel="prefetch" href="/Notes/assets/js/49.54e94820.js"><link rel="prefetch" href="/Notes/assets/js/5.ebf595b6.js"><link rel="prefetch" href="/Notes/assets/js/50.63e48f48.js"><link rel="prefetch" href="/Notes/assets/js/51.7e4af462.js"><link rel="prefetch" href="/Notes/assets/js/52.d61ec835.js"><link rel="prefetch" href="/Notes/assets/js/53.836cb30f.js"><link rel="prefetch" href="/Notes/assets/js/54.77747ea5.js"><link rel="prefetch" href="/Notes/assets/js/55.a45498b2.js"><link rel="prefetch" href="/Notes/assets/js/56.31d8650e.js"><link rel="prefetch" href="/Notes/assets/js/57.d54105aa.js"><link rel="prefetch" href="/Notes/assets/js/58.b0780471.js"><link rel="prefetch" href="/Notes/assets/js/59.d38165d1.js"><link rel="prefetch" href="/Notes/assets/js/60.4ce717da.js"><link rel="prefetch" href="/Notes/assets/js/61.90977508.js"><link rel="prefetch" href="/Notes/assets/js/62.8b0b1429.js"><link rel="prefetch" href="/Notes/assets/js/63.6f6c7222.js"><link rel="prefetch" href="/Notes/assets/js/64.db097337.js"><link rel="prefetch" href="/Notes/assets/js/65.65641ee2.js"><link rel="prefetch" href="/Notes/assets/js/66.495b0673.js"><link rel="prefetch" href="/Notes/assets/js/67.897dec6e.js"><link rel="prefetch" href="/Notes/assets/js/68.a81e7e12.js"><link rel="prefetch" href="/Notes/assets/js/69.23e234f4.js"><link rel="prefetch" href="/Notes/assets/js/70.62cdfd23.js"><link rel="prefetch" href="/Notes/assets/js/71.e5d44f88.js"><link rel="prefetch" href="/Notes/assets/js/72.8d2fdbec.js"><link rel="prefetch" href="/Notes/assets/js/73.77e0a646.js"><link rel="prefetch" href="/Notes/assets/js/74.687023c7.js"><link rel="prefetch" href="/Notes/assets/js/75.6ed234fd.js"><link rel="prefetch" href="/Notes/assets/js/76.4f7e47ca.js"><link rel="prefetch" href="/Notes/assets/js/77.9ba5a8c9.js"><link rel="prefetch" href="/Notes/assets/js/78.020b2f81.js"><link rel="prefetch" href="/Notes/assets/js/79.8495e8f1.js"><link rel="prefetch" href="/Notes/assets/js/8.c2996aad.js"><link rel="prefetch" href="/Notes/assets/js/80.3f2bcc6a.js"><link rel="prefetch" href="/Notes/assets/js/81.c2d2ec54.js"><link rel="prefetch" href="/Notes/assets/js/82.2c144b55.js"><link rel="prefetch" href="/Notes/assets/js/83.29890e79.js"><link rel="prefetch" href="/Notes/assets/js/84.00371102.js"><link rel="prefetch" href="/Notes/assets/js/9.c7108ba4.js"><link rel="prefetch" href="/Notes/assets/js/vendors~docsearch.649f9bfd.js">
    <link rel="stylesheet" href="/Notes/assets/css/0.styles.a503b4b5.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/Notes/" class="home-link router-link-active"><img src="/Notes/logo.png" alt="ç‚«" class="logo"> <span class="site-name can-hide">ç‚«</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/Notes/" class="nav-link">
  é¦–é¡µ
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="å‰ç«¯" class="dropdown-title"><span class="title">å‰ç«¯</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Notes/HTML-CSS/HTML.html" class="nav-link">
  HTML CSS
</a></li><li class="dropdown-item"><!----> <a href="/Notes/JavaScript/API.html" class="nav-link">
  JavaScript
</a></li><li class="dropdown-item"><!----> <a href="/Notes/TypeScript/index.html" class="nav-link">
  TypeScript
</a></li><li class="dropdown-item"><!----> <a href="/Notes/Vue/index.html" class="nav-link">
  Vue
</a></li><li class="dropdown-item"><!----> <a href="/Notes/React/index.html" class="nav-link">
  React
</a></li><li class="dropdown-item"><!----> <a href="/Notes/MiniProgram/index.html" class="nav-link">
  å°ç¨‹åº
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="åç«¯" class="dropdown-title"><span class="title">åç«¯</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Notes/Node/index.html" class="nav-link">
  Node
</a></li><li class="dropdown-item"><!----> <a href="/Notes/Deno/index.html" class="nav-link">
  Deno
</a></li><li class="dropdown-item"><!----> <a href="/Notes/Python/index.html" class="nav-link">
  Python
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="æ•°æ®åº“" class="dropdown-title"><span class="title">æ•°æ®åº“</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Notes/MySQL/index.html" class="nav-link">
  MySQL
</a></li><li class="dropdown-item"><!----> <a href="/Notes/MongoDB/index.html" class="nav-link">
  MongoDB
</a></li></ul></div></div><div class="nav-item"><a href="/Notes/other/index.html" class="nav-link">
  æ–‡æ¡£
</a></div> <a href="https://github.com/xuan-zhang/Notes" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/Notes/" class="nav-link">
  é¦–é¡µ
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="å‰ç«¯" class="dropdown-title"><span class="title">å‰ç«¯</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Notes/HTML-CSS/HTML.html" class="nav-link">
  HTML CSS
</a></li><li class="dropdown-item"><!----> <a href="/Notes/JavaScript/API.html" class="nav-link">
  JavaScript
</a></li><li class="dropdown-item"><!----> <a href="/Notes/TypeScript/index.html" class="nav-link">
  TypeScript
</a></li><li class="dropdown-item"><!----> <a href="/Notes/Vue/index.html" class="nav-link">
  Vue
</a></li><li class="dropdown-item"><!----> <a href="/Notes/React/index.html" class="nav-link">
  React
</a></li><li class="dropdown-item"><!----> <a href="/Notes/MiniProgram/index.html" class="nav-link">
  å°ç¨‹åº
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="åç«¯" class="dropdown-title"><span class="title">åç«¯</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Notes/Node/index.html" class="nav-link">
  Node
</a></li><li class="dropdown-item"><!----> <a href="/Notes/Deno/index.html" class="nav-link">
  Deno
</a></li><li class="dropdown-item"><!----> <a href="/Notes/Python/index.html" class="nav-link">
  Python
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="æ•°æ®åº“" class="dropdown-title"><span class="title">æ•°æ®åº“</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Notes/MySQL/index.html" class="nav-link">
  MySQL
</a></li><li class="dropdown-item"><!----> <a href="/Notes/MongoDB/index.html" class="nav-link">
  MongoDB
</a></li></ul></div></div><div class="nav-item"><a href="/Notes/other/index.html" class="nav-link">
  æ–‡æ¡£
</a></div> <a href="https://github.com/xuan-zhang/Notes" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>React</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/Notes/React/" aria-current="page" class="active sidebar-link">React</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Notes/React/#ç»„ä»¶" class="sidebar-link">ç»„ä»¶</a></li><li class="sidebar-sub-header"><a href="/Notes/React/#ç»„ä»¶ä¼ å‚" class="sidebar-link">ç»„ä»¶ä¼ å‚</a></li><li class="sidebar-sub-header"><a href="/Notes/React/#jsx" class="sidebar-link">JSX</a></li><li class="sidebar-sub-header"><a href="/Notes/React/#api" class="sidebar-link">API</a></li><li class="sidebar-sub-header"><a href="/Notes/React/#ç”Ÿå‘½å‘¨æœŸ" class="sidebar-link">ç”Ÿå‘½å‘¨æœŸ</a></li></ul></li><li><a href="/Notes/React/eslint.html" class="sidebar-link">é…ç½® Eslint  Prettier</a></li><li><a href="/Notes/React/å·¥å…·åº“.html" class="sidebar-link">React ä¸­å¸¸ç”¨æ’ä»¶ä¸åŒ…</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="react"><a href="#react" class="header-anchor">#</a> React</h1> <blockquote><p><a href="https://www.html.cn/create-react-app/docs/getting-started/" target="_blank" rel="noopener noreferrer">create-react-app<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a><br> <a href="https://zh-hans.reactjs.org/" target="_blank" rel="noopener noreferrer">react<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a><br> <a href="https://redux.js.org/" target="_blank" rel="noopener noreferrer">redux<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> <a href="https://www.redux.org.cn/" target="_blank" rel="noopener noreferrer">reduxä¸­æ–‡æ–‡æ¡£<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a><br> <a href="https://reactnative.dev/" target="_blank" rel="noopener noreferrer">reactnative<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a><br> <a href="http://react-guide.github.io/react-router-cn/docs/Introduction.html" target="_blank" rel="noopener noreferrer">react-router<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote> <h2 id="ç»„ä»¶"><a href="#ç»„ä»¶" class="header-anchor">#</a> ç»„ä»¶</h2> <ul><li>react ç»„ä»¶å¿…é¡»é¦–å­—æ¯å¤§å†™
<ul><li>ç»„ä»¶å¤§å°å†™æ˜¯ä¸ºäº†åŒºåˆ«é€šè¿‡HTMLæ ‡ç­¾å®šä¹‰çš„JSXï¼Œå¤§å†™çš„ç»„ä»¶åœ¨å®šä¹‰æ—¶ï¼Œå…¶typeä¼šæ˜¯React.Componentç±»å‹ï¼Œè‹¥æ˜¯å°†ç»„ä»¶åå†™æˆäº†å°å†™ï¼Œåˆ™å®šä¹‰æ—¶ä¼šå°†å…¶å½“ä½œHTMLæ ‡ç­¾å®šä¹‰è¿›è¡Œ</li></ul></li> <li>ç»„ä»¶å£°æ˜
<ul><li>å‡½æ•°å¼å®šä¹‰çš„æ— çŠ¶æ€ç»„ä»¶
<ul><li>ä¸€ä¸ªå‡½æ•°å¼ç»„ä»¶ä¸èƒ½åœ¨å¦ä¸€ä¸ªå‡½æ•°å¼ç»„ä»¶å†…å£°æ˜</li></ul></li> <li><s>es5åŸç”Ÿæ–¹å¼React.createClasså®šä¹‰çš„ç»„ä»¶</s></li> <li>es6å½¢å¼çš„extends React.Componentå®šä¹‰çš„ç»„ä»¶</li></ul></li> <li>ä»£ç ä¸­ä½¿ç”¨ emojiï¼š ç”¨ span æ ‡ç­¾ï¼Œå¹¶è®¾ç½® role='img' <code>aria-abel</code> æˆ– <code>aria-labelledby</code> <ul><li><code>&lt;span role=&quot;img&quot; aria-label=&quot;happy&quot;&gt;ğŸ˜&lt;/span&gt;</code></li></ul></li></ul> <h2 id="ç»„ä»¶ä¼ å‚"><a href="#ç»„ä»¶ä¼ å‚" class="header-anchor">#</a> ç»„ä»¶ä¼ å‚</h2> <ul><li>props</li> <li>å›è°ƒå‡½æ•°</li> <li>è§‚å¯Ÿè€…æ¨¡å¼</li> <li>context</li> <li>react-redux</li></ul> <h2 id="jsx"><a href="#jsx" class="header-anchor">#</a> JSX</h2> <ul><li>ç”¨æˆ·å®šä¹‰çš„ç»„ä»¶å¿…é¡»ä»¥å¤§å†™å­—æ¯å¼€å¤´</li> <li><code>&lt;input type=&quot;text&quot; value=&quot;haha&quot;&gt;</code> çš„ react ä¸­ ä¸èƒ½ç¼–è¾‘ ä½†åœ¨åŸç”Ÿ html ä¸­ å¯ç¼–è¾‘ï¼Œ å¦‚ <code>value={undefined}</code> åˆ™å¯ç¼–è¾‘</li> <li><code>class</code> å˜æˆ <code>className</code></li> <li><code>for</code> å˜æˆ <code>htmlFor</code></li> <li><code>tableindex</code> å˜æˆ <code>tableIndex</code></li> <li><code>style</code> å¿…é¡»æ˜¯ <code>Object</code> å¯¹è±¡å½¢å¼ <code>style={ {textAlign: 'left'} }</code></li> <li>å¯ä»¥åœ¨ <code>for if</code> ç­‰è¯­å¥ä¸­ä½¿ç”¨ <code>jsx</code>; ä½†ä¸å¯ä»¥åœ¨ <code>jsx</code> ä¸­ä½¿ç”¨ <code>for if</code>, å¯ä»¥ç”¨ <code>?:</code> <code>&amp;&amp;</code></li></ul> <h2 id="api"><a href="#api" class="header-anchor">#</a> API</h2> <h3 id="props"><a href="#props" class="header-anchor">#</a> props</h3> <ul><li><code>static defaultProps</code>: è®¾ç½®é»˜è®¤ <code>props</code> <ul><li>å¦‚åŒ vue ä¸­çš„ props é‡Œçš„ <code>default</code> å‚æ•°</li></ul></li> <li><code>props.children</code>: ç»„ä»¶çš„æ‰€æœ‰å­èŠ‚ç‚¹
<ul><li>ç±»ä¼¼äº vue ä¸­çš„ <code>default slot</code></li> <li>react ä¸­æ²¡æœ‰ æ’æ§½æ¦‚å¿µï¼Œä½† å¯ä»¥å°†ä»»ä½•ä¸œè¥¿ä½œä¸º props è¿›è¡Œä¼ é€’ã€‚</li> <li>å½“ä¸æ’å…¥å†…å®¹æˆ–å†…å®¹ä¸ºæ¢è¡Œç¬¦æ—¶ï¼Œprops.childrenä¸ºundefined</li> <li>å½“æ’å…¥å¤šä¸ªå†…å®¹æ—¶ï¼Œprops.childrenä¸ºArrayï¼ˆå¤šä¸ªæ–‡æœ¬è§†ä¸ºä¸€ä¸ªå†…å®¹ï¼‰</li> <li>å½“æ’å…¥ä¸€ä¸ªå†…å®¹æ—¶ï¼Œprops.childrenä¸ºæ’å…¥å€¼</li> <li>çˆ¶ç»„ä»¶çš„å±æ€§ä¼ ç»™æ‰€æœ‰å­ç»„ä»¶å°±è¦ç”¨åˆ° <code>React.Children</code></li></ul></li></ul> <h3 id="state"><a href="#state" class="header-anchor">#</a> state</h3> <ul><li><code>setState</code> <ul><li>è°ƒç”¨æ­¤æ–¹æ³•å°±ä¼šè§¦å‘æ›´æ–°é˜¶æ®µé’©å­å‡½æ•°</li> <li>å¯ä»¥è®¾ç½®æœªåœ¨ <code>state</code> ä¸­åˆå§‹åŒ–çš„å­—æ®µï¼Œæ·»åŠ æ–°çš„å­—æ®µ</li> <li>åœ¨å‘¨æœŸå‡½æ•°ä¸­çš„ä½¿ç”¨
<ul><li>åœ¨ <code>constructor</code>ä½¿ç”¨æ— æ•ˆ</li> <li>åœ¨ <code>static getDerivedStateFromProps</code> ä¸èƒ½è°ƒç”¨</li> <li>åœ¨ <s><code>componentWillMount</code></s> ä¸­ä½¿ç”¨æœ‰æ•ˆï¼Œä½†ä¸ä¸€å®šä¼šå¼•èµ·ç»„ä»¶é‡æ–°æ¸²æŸ“</li> <li>åœ¨ <s><code>componentWillReceiveProps</code></s> ä¸­å¯ä»¥ä½¿ç”¨</li> <li>ä¸èƒ½åœ¨ <code>shouldComponentUpdate</code> <s><code>componentWillUpdate</code></s> ä¸­è°ƒç”¨ï¼Œä¼šå¼•èµ·æ­»å¾ªç¯</li> <li>åœ¨ <code>render</code> ä¸­ä½¿ç”¨ä¼šé™·å…¥æ­»å¾ªç¯</li> <li>åœ¨ <code>componentDidUpdate</code> ä¸­ä½¿ç”¨è¦ç‰¹åˆ«æ³¨æ„åˆ¤æ–­ï¼Œå¦åˆ™ä¼šé™·å…¥æ­»å¾ªç¯</li> <li>åœ¨ <code>componentDidMount</code> ä¸­å¯ä»¥ä½¿ç”¨ï¼Œç”¨äºæ¥å£æ•°æ®è·å–</li></ul></li></ul></li></ul> <h3 id="react-fragment"><a href="#react-fragment" class="header-anchor">#</a> React.Fragment</h3> <ul><li><code>&lt;React.Fragment&gt;...&lt;/React.Fragment&gt;</code> <ul><li>ä¸ä¼šæ¸²æŸ“æˆæ ‡ç­¾</li> <li>å¯ä»¥æœ‰ keyå±æ€§ï¼Œä¹Ÿæ˜¯ç›®å‰å”¯ä¸€çš„å±æ€§</li></ul></li> <li>çŸ­è¯­æ³•ï¼š <code>&lt;&gt;...&lt;/&gt;</code> <ul><li>ä¸æ”¯æŒ key ä¸å…¶å®ƒå±æ€§</li></ul></li> <li>ç±»ä¼¼äº vue ä¸­çš„ <code>template</code></li></ul> <h3 id="react-lazy"><a href="#react-lazy" class="header-anchor">#</a> React.lazy</h3> <blockquote><p><code>React.lazy</code> å’Œ <code>Suspense</code> æŠ€æœ¯è¿˜ä¸æ”¯æŒæœåŠ¡ç«¯æ¸²æŸ“</p></blockquote> <ul><li><p>åƒæ¸²æŸ“å¸¸è§„ç»„ä»¶ä¸€æ ·å¤„ç†åŠ¨æ€å¼•å…¥ï¼ˆçš„ç»„ä»¶)</p></li> <li><p><code>const OtherComponent = React.lazy(() =&gt; import('./OtherComponent'));</code></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Suspense <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> OtherComponent <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">lazy</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'./OtherComponent'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> AnotherComponent <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">lazy</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'./AnotherComponent'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">MyComponent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>Suspense fallback<span class="token operator">=</span><span class="token punctuation">{</span><span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>Loading<span class="token operator">...</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>section<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>OtherComponent <span class="token operator">/</span><span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>AnotherComponent <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>section<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>Suspense<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div></li></ul> <h3 id="suspense"><a href="#suspense" class="header-anchor">#</a> Suspense</h3> <h3 id="context"><a href="#context" class="header-anchor">#</a> Context</h3> <ul><li><code>React.createContext(defaultValue)</code></li> <li><code>Context.Provider</code></li> <li><code>Class.contextType</code> <ul><li><code>static contextType = MyContext</code></li></ul></li> <li><code>Context.Consumer</code></li> <li><code>Context.displayName</code></li></ul> <blockquote><p><a href="https://segmentfault.com/a/1190000017483690" target="_blank" rel="noopener noreferrer">å…¨é¢äº†è§£ React æ–°åŠŸèƒ½: Suspense å’Œ Hooks<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote> <h3 id="static-getderivedstatefromerror"><a href="#static-getderivedstatefromerror" class="header-anchor">#</a> static getDerivedStateFromError()</h3> <h3 id="ref"><a href="#ref" class="header-anchor">#</a> Ref</h3> <ul><li>React.createRef
<ul><li>v16 ç‰ˆæœ¬ä¹‹åæ–°å¢ï¼Œå–å€¼åœ¨ <code>this.textInput.current</code></li> <li>v16 ç‰ˆæœ¬ä¹‹å‰ï¼Œä½¿ç”¨å‡½æ•° <code>ref={ele =&gt; this.textInput = ele}</code></li> <li>ä¸èƒ½åœ¨å‡½æ•°ç»„ä»¶ä¸Šä½¿ç”¨ ref å±æ€§ï¼Œå› ä¸ºå‡½æ•°ç»„ä»¶æ²¡æœ‰å®ä¾‹</li></ul></li> <li>React.useRef
<ul><li>ä»…é™äºåœ¨å‡½æ•°ç»„ä»¶å†…ä½¿ç”¨</li> <li>useRef è¿”å›çš„ ref å¯¹è±¡åœ¨ç»„ä»¶çš„æ•´ä¸ªç”Ÿå‘½å‘¨æœŸå†…ä¿æŒä¸å˜</li></ul></li> <li>React.forwardRef
<ul><li>v16 æ–°å¢ï¼Œè½¬å‘ ref</li></ul></li></ul> <h3 id="react-purecomponent"><a href="#react-purecomponent" class="header-anchor">#</a> React.PureComponent</h3> <ul><li><a href="https://zh-hans.reactjs.org/docs/react-api.html#reactpurecomponent" target="_blank" rel="noopener noreferrer">æ–‡æ¡£<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><code>React.PureComponent</code> ä¸ <code>React.Component</code> å¾ˆç›¸ä¼¼ã€‚ä¸¤è€…çš„åŒºåˆ«åœ¨äº <code>React.Component</code> å¹¶æœªå®ç° <code>shouldComponentUpdate()</code>ï¼Œè€Œ <code>React.PureComponent</code> ä¸­ä»¥æµ…å±‚å¯¹æ¯” <code>prop</code> å’Œ <code>state</code> çš„æ–¹å¼æ¥å®ç°äº†è¯¥å‡½æ•°ã€‚</li></ul> <h3 id="reactdom-createportal"><a href="#reactdom-createportal" class="header-anchor">#</a> ReactDOM.createPortal</h3> <h3 id="react-profiler"><a href="#react-profiler" class="header-anchor">#</a> React.Profiler</h3> <h3 id="react-createelement"><a href="#react-createelement" class="header-anchor">#</a> React.createElement</h3> <h3 id="proptypes"><a href="#proptypes" class="header-anchor">#</a> PropTypes</h3> <ul><li><a href="https://zh-hans.reactjs.org/docs/typechecking-with-proptypes.html#gatsby-focus-wrapper" target="_blank" rel="noopener noreferrer">æ–‡æ¡£<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>ç±»å‹æ£€æµ‹ï¼Œç±»ä¼¼ vue ä¸­ props ç±»å‹æ£€æŸ¥</li> <li>ä½¿ç”¨ <code>TS</code> å¯ä»¥çœç•¥æ­¤æ­¥éª¤</li> <li>è‡ª React v15.5 èµ·ï¼Œ<code>React.PropTypes</code> å·²ç§»å…¥å¦ä¸€ä¸ªåŒ…ä¸­ã€‚è¯·ä½¿ç”¨ <code>prop-types</code> åº“ä»£æ›¿</li></ul> <h2 id="ç”Ÿå‘½å‘¨æœŸ"><a href="#ç”Ÿå‘½å‘¨æœŸ" class="header-anchor">#</a> ç”Ÿå‘½å‘¨æœŸ</h2> <blockquote><p><code>componentWillMount</code> <code>componentWillReceiveProps</code> <code>componentWillUpdate</code>å‘¨æœŸä¼šåœ¨ v17 ç‰ˆæœ¬ä¹‹åä¿ç•™åˆ é™¤ï¼Œ<code>UNSAFE_*</code> å‡½æ•°ä¼šä¿ç•™<br>
å›  <code>React Fiber</code>, å‘¨æœŸæ”¹å˜</p></blockquote> <ul><li><a href="https://projects.wojtekmaj.pl/react-lifecycle-methods-diagram/" target="_blank" rel="noopener noreferrer">ç”Ÿå‘½å‘¨æœŸå›¾è°±<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>æ—§ç‰ˆç”Ÿå‘½å‘¨æœŸ(v16.0å‰)
<ul><li><img src="/Notes/assets/img/reactLifecycleOld.7e04781c.jpg" alt="reactç”Ÿå‘½å‘¨æœŸæ—§"></li> <li><img src="/Notes/assets/img/reactLifecycleRunOld.d90843bb.png" alt="reactç”Ÿå‘½å‘¨æœŸæ—§"></li></ul></li> <li>æ–°ç‰ˆç”Ÿå‘½å‘¨æœŸ(v16.3å)
<ul><li><img src="/Notes/assets/img/reactLifecycleNew.b8fb4ab5.jpg" alt="ç”Ÿå‘½å‘¨æœŸ"></li> <li><img src="/Notes/assets/img/reactLifecycleType.fa513f62.png" alt="ç”Ÿå‘½å‘¨æœŸ"></li></ul></li></ul> <h3 id="åˆå§‹åŒ–é˜¶æ®µ"><a href="#åˆå§‹åŒ–é˜¶æ®µ" class="header-anchor">#</a> åˆå§‹åŒ–é˜¶æ®µ</h3> <ul><li><code>constructor(props: Readonly&lt;P&gt;, context?: any)</code> <ul><li>åªè°ƒç”¨ä¸€æ¬¡ <code>super</code> å¿…é¡»åœ¨ä½¿ç”¨ <code>this</code> è¯­å¥ä¹‹å‰è°ƒç”¨</li> <li>å‚æ•°: <code>props</code></li> <li>ä½œç”¨
<ul><li>åˆå§‹åŒ– <code>state</code></li> <li>...</li></ul></li></ul></li></ul> <h3 id="æŒ‚è½½é˜¶æ®µ"><a href="#æŒ‚è½½é˜¶æ®µ" class="header-anchor">#</a> æŒ‚è½½é˜¶æ®µ</h3> <ul><li><s><code>componentWillMount()/UNSAFE_componentWillMount()?:void</code></s> <ul><li>ç»„ä»¶æŒ‚è½½ä¹‹å‰è°ƒç”¨ï¼Œåªè°ƒç”¨ä¸€æ¬¡ ä½¿ç”¨ <code>contructor</code> ä»£æ›¿</li> <li>æ­¤æ—¶è°ƒç”¨ <code>this.setState</code> ä¸ä¸€å®šä¼šå¼•èµ·ç»„ä»¶é‡æ–°æ¸²æŸ“</li> <li>åœ¨Fiberä¹‹åï¼Œ ç”±äºä»»åŠ¡å¯ä¸­æ–­ï¼ŒwillMountå¯èƒ½ä¼šè¢«æ‰§è¡Œå¤šæ¬¡</li></ul></li> <li><code>static getDerivedStateFromProps(nextProps, prevState):Partial&lt;prevState&gt; | null</code></li> <li><code>render(): ReactNode</code> <ul><li>ç”¨æ¥æ¸²æŸ“DOM</li> <li>å¿…é¡»æ˜¯çº¯å‡½æ•°</li> <li>è¿”å› <code>JSX.Element</code></li> <li>ä¸è¦åœ¨ <code>render</code> é‡Œé¢ä¿®æ”¹ <code>state</code>ï¼Œä¼šè§¦å‘æ­»å¾ªç¯å¯¼è‡´æ ˆæº¢å‡º</li></ul></li> <li><code>componentDidMount?(): void</code> <ul><li>ç»„ä»¶æŒ‚è½½åè°ƒç”¨ï¼Œ åªè°ƒç”¨ä¸€æ¬¡</li> <li>å¯ä»¥åœ¨è¿™é‡Œä½¿ç”¨ refs è·å–çœŸå® DOM</li> <li>å¯åœ¨æ­¤å¤„å‘èµ· å¼‚æ­¥è¯·æ±‚ å¹¶è¿›è¡Œ <code>setSate</code></li> <li>ä¾èµ– DOM åˆå§‹åŒ– æ·»åŠ äº‹ä»¶ç›‘å¬</li></ul></li></ul> <h3 id="æ›´æ–°é˜¶æ®µ"><a href="#æ›´æ–°é˜¶æ®µ" class="header-anchor">#</a> æ›´æ–°é˜¶æ®µ</h3> <blockquote><p><code>setState</code> å¼•èµ·çš„ <code>state</code> æ›´æ–°<br>
çˆ¶ç»„ä»¶èƒ½è¿‡ <code>setState</code> å¼•èµ·çš„ <code>props</code> å˜åŒ–æ—¶ï¼Œè§¦å‘æ›´æ–°é˜¶æ®µ<br>
çˆ¶ç»„ä»¶ <code>render</code> è§¦å‘æ—¶ï¼Œ è§¦å‘æ›´æ–°å­ç»„ä»¶æ›´æ–°é˜¶æ®µ
æ›´æ–°åçš„ state å’Œ props ç›¸å¯¹ä¹‹å‰çš„æ— è®ºæ˜¯å¦å˜åŒ–ï¼Œéƒ½ä¼šå¼•èµ·ç»„ä»¶é‡æ–° render</p></blockquote> <ul><li><s><code>componentWillReceiveProps()/UNSAFE_componentWillReceiveProps(nextProps, nextContext)</code></s> <ul><li><code>props</code> å˜åŒ–ä¸ çˆ¶ç»„ä»¶é‡æ–°æ¸²æŸ“æ—¶ï¼Œéƒ½ä¼šè§¦å‘</li> <li><code>nextProps</code> å˜åŒ–ä¹‹åçš„ <code>props</code> å‚æ•°
<ul><li>åœ¨è¯¥å‡½æ•°å†…ä½¿ç”¨ <code>this.props</code> è¿”å›çš„æ˜¯æœªæ›´æ–°å‰çš„ <code>props</code></li> <li>å¯ä»¥åœ¨æ­¤å‡½æ•°å†…ä½¿ç”¨ <code>setState</code></li></ul></li></ul></li> <li><code>static getDerivedStateFromProps(nextProps, prevState):Partial&lt;prevState&gt; | null</code> <ul><li>æ¯æ¬¡æ¸²æŸ“ä¹‹å‰éƒ½ä¼šè°ƒç”¨, ä¸ç®¡é€ æˆé‡æ–°æ¸²æŸ“çš„åŸå› æ˜¯ä»€ä¹ˆï¼Œä¸ç®¡åˆå§‹æŒ‚è½½è¿˜æ˜¯åé¢çš„æ›´æ–°éƒ½ä¼šè°ƒç”¨</li> <li>éœ€è¦åœ¨è¯¥æ–¹æ³•ä¸­è¿”å›ä¸€ä¸ªå¯¹è±¡æˆ–null
<ul><li>å¦‚æœè¿”å›çš„æ˜¯å¯¹è±¡ï¼Œåˆ™ä¼šæ›´æ–° stateï¼Œè¿”å›ç»“æœä¼šè¢«é€ç»™setState</li> <li>å¦‚æœè¿”å›çš„æ˜¯nullï¼Œåˆ™è¡¨ç¤ºä¸æ›´æ–°ã€‚</li></ul></li> <li>ä½¿ç”¨è¯¥æ–¹æ³•çš„æ—¶å€™éœ€è¦åˆå§‹åŒ– <code>state</code> ï¼Œå¦åˆ™åœ¨æ§åˆ¶å°ä¸­ä¼šå‡ºç°è­¦å‘Šä¿¡æ¯ï¼Œä¸èƒ½åœ¨è¯¥æ–¹æ³•å†…éƒ¨ï¼Œè°ƒç”¨ <code>this.state</code></li> <li>æ— æ³•åœ¨æ­¤å‡½æ•°å†…ä½¿ç”¨ <code>this</code>, è¿™é‡Œçš„ <code>this</code> æŒ‡å‘ <code>undefined</code></li> <li>å°†çˆ¶ç»„ä»¶ä¼ é€’è¿‡æ¥çš„ props æ˜ å°„ åˆ°å­ç»„ä»¶çš„ state ä¸Šé¢ï¼Œè¿™æ ·ç»„ä»¶å†…éƒ¨å°±ä¸ç”¨å†é€šè¿‡ this.props.xxx è·å–å±æ€§å€¼äº†ï¼Œç»Ÿä¸€é€šè¿‡ this.state.xxx è·å–. æ˜ å°„å°±ç›¸å½“äºæ‹·è´äº†ä¸€ä»½çˆ¶ç»„ä»¶ä¼ è¿‡æ¥çš„ props ï¼Œä½œä¸ºå­ç»„ä»¶è‡ªå·±çš„çŠ¶æ€ã€‚æ³¨æ„ï¼šå­ç»„ä»¶é€šè¿‡ setState æ›´æ–°è‡ªèº«çŠ¶æ€æ—¶ï¼Œä¸ä¼šæ”¹å˜çˆ¶ç»„ä»¶çš„ props</li> <li>é…åˆ componentDidUpdateï¼Œå¯ä»¥è¦†ç›– componentWillReceiveProps çš„æ‰€æœ‰ç”¨æ³•</li></ul></li> <li><code>shouldComponentUpdate(nextProps, nextState, nextConext):boolean</code> <ul><li>åœ¨é¦–æ¬¡æ¸²æŸ“æ—¶æˆ–è€… <code>forceUpdate()</code> æ—¶ä¸ä¼šè§¦å‘</li> <li>æ¯æ¬¡è°ƒç”¨ <code>setState</code> éƒ½ä¼šè§¦å‘ï¼Œç”¨äºåˆ¤æ–­æ˜¯å¦è¦é‡æ–°æ¸²æŸ“ç»„ä»¶</li> <li>èƒ½è¿‡æ¯”è¾ƒ <code>nextProps</code> <code>nextState</code> åŠå½“å‰ç»„ä»¶çš„ <code>this.props</code> <code>this.state</code> çš„çŠ¶æ€æ¥åˆ¤æ–­æ˜¯å¦é‡æ–°æ¸²æŸ“</li> <li>å¦‚æœè¿”å› <code>false</code> åç»­å‘¨æœŸå‡½æ•°ä¸å†è§¦å‘
<ul><li>React å¯èƒ½å°†shouldComponentUpdateè§†åšæç¤ºè€Œä¸æ˜¯ä¸¥æ ¼çš„æ ¹æ®å®ƒçš„è¿”å›ç»“æœå†³å®šæ˜¯å¦æ‰§è¡Œï¼Œä¹Ÿå°±æ˜¯è¯´å¯èƒ½å‡ºç°shouldComponentUpdateè¿”å›falseï¼Œä½†æ˜¯è¿˜æ˜¯å‘ç”Ÿé‡æ–°æ¸²æŸ“</li></ul></li> <li>ä¸èƒ½ä½¿ç”¨ <code>setState</code>, ä¼šæ­»å¾ªç¯</li> <li>ä¸€èˆ¬èƒ½è¿‡æ­¤å‡½æ•°è¿›è¡Œæ€§èƒ½ä¼˜åŒ–
<ul><li>çˆ¶ç»„ä»¶ <code>render</code> ä¼šè§¦å‘ å­çº§ç»„ä»¶ æ›´æ–°é˜¶æ®µ</li> <li>å¯åœ¨äº›å‡½æ•°ä¸­ä¸­æ­¢ä¸å¿…è¦çš„æ›´æ–°ï¼Œåå°çš„ è™šæ‹Ÿ DOM diff ...</li></ul></li></ul></li> <li><s><code>componentWillUpdate()/UNSAFE_componentWillUpdate(nextProps, nextState, nextContext)</code></s> <ul><li>ç»„ä»¶å³å°†è¢«æ›´æ–°æ—¶è§¦å‘</li> <li><code>shouldComponentUpdate</code> è¿”å› <code>true</code> æˆ– è°ƒç”¨ <code>forceUpdate</code> ä¹‹åè°ƒç”¨</li> <li>ä¸èƒ½åœ¨è¯¥é’©å­ä¸­ä½¿ç”¨ <code>setState</code></li></ul></li> <li><code>render()</code></li> <li><code>getSnapshotBeforeUpdate(prevProps, prevState): any | null</code> <ul><li>è¢«è°ƒç”¨äº render ä¹‹åã€æ›´æ–° DOM å’Œ refs ä¹‹å‰</li> <li>è¿”å›å€¼ç§°ä¸ºä¸€ä¸ªå¿«ç…§ï¼ˆsnapshotï¼‰ï¼Œå¦‚æœä¸éœ€è¦ snapshotï¼Œåˆ™å¿…é¡»æ˜¾ç¤ºçš„è¿”å› <code>null</code></li> <li>è¿”å›å€¼å°†ä½œä¸º <code>componentDidUpdate()</code> çš„ç¬¬ä¸‰ä¸ªå‚æ•°ä½¿ç”¨ã€‚æ‰€ä»¥è¿™ä¸ªå‡½æ•°å¿…é¡»è¦é…åˆ <code>componentDidUpdate</code>() ä¸€èµ·ä½¿ç”¨, å¯ä»¥è¦†ç›– <code>componentWillUpdate</code> çš„æ‰€æœ‰ç”¨æ³•
<ul><li>åœ¨ <code>getSnapShotBeforeUpdate</code> ä¸­è·å–æ»šåŠ¨ä½ç½®ï¼Œç„¶åä½œä¸ºå‚æ•°ä¼ ç»™ <code>componentDidUpdate</code>ï¼Œå°±å¯ä»¥ç›´æ¥åœ¨æ¸²æŸ“çœŸå®çš„ DOM æ—¶å°±æ»šåŠ¨åˆ°éœ€è¦çš„ä½ç½®ã€‚</li></ul></li></ul></li> <li><code>componentDidUpdate(prevProps, prevState, snapShot)</code> <ul><li>è¯¥æ–¹æ³•ä¸ä¼šå†ç»„ä»¶åˆå§‹åŒ–æ—¶è§¦å‘</li> <li>ç»„ä»¶æ›´æ–°ä¹‹åè°ƒç”¨</li> <li><code>props</code> <code>state</code> ä¸­æ­¤é’©å­å‡½æ•°å†…å·²æ›´æ”¹æˆæœ€æ–°, <code>this.props</code> è®¿é—®åˆ°çš„æ˜¯æ–°çš„ <code>props</code></li> <li>é’©å­å†… <code>setState</code> æœ‰å¯èƒ½ä¼šè§¦å‘é‡å¤æ¸²æŸ“ï¼Œéœ€è¦è‡ªè¡Œåˆ¤æ–­ï¼Œå¦åˆ™ä¼šè¿›å…¥æ­»å¾ªç¯</li></ul></li></ul> <h3 id="å¸è½½é˜¶æ®µ"><a href="#å¸è½½é˜¶æ®µ" class="header-anchor">#</a> å¸è½½é˜¶æ®µ</h3> <ul><li><code>componentWillUnmount()</code> <ul><li>ç»„ä»¶å¸è½½å‰è°ƒç”¨</li> <li>è¿›è¡Œä¸€äº›æ¸…ç†å·¥ä½œ
<ul><li>å»é™¤å®šæ—¶å™¨</li> <li>å–æ¶ˆ Redux è®¢é˜…äº‹ä»¶</li> <li>æ¸…é™¤ componentDidMount ä¸­æ‰‹åŠ¨åˆ›å»ºçš„ DOM å…ƒç´ </li> <li>å»é™¤å¯èƒ½çš„å†…å­˜æ³„éœ²</li> <li>...</li></ul></li></ul></li></ul> <h3 id="é”™è¯¯æ•è·"><a href="#é”™è¯¯æ•è·" class="header-anchor">#</a> é”™è¯¯æ•è·</h3> <ul><li><code>componentDidCatch(error: Error, errorInfo: React.ErrorInfo)</code> <ul><li>ä»»ä½•å­ç»„ä»¶åœ¨æ¸²æŸ“æœŸé—´ï¼Œç”Ÿå‘½å‘¨æœŸæ–¹æ³•ä¸­æˆ–è€…æ„é€ å‡½æ•° <code>constructor</code> å‘ç”Ÿé”™è¯¯æ—¶è°ƒç”¨</li> <li>é”™è¯¯è¾¹ç•Œä¸ä¼šæ•è·ä¸‹é¢çš„é”™è¯¯
<ul><li>äº‹ä»¶å¤„ç† (Event handlers) ï¼ˆå› ä¸ºäº‹ä»¶å¤„ç†ä¸å‘ç”Ÿåœ¨ React æ¸²æŸ“æ—¶ï¼ŒæŠ¥é”™ä¸å½±å“æ¸²æŸ“)</li> <li>å¼‚æ­¥ä»£ç  (Asynchronous code) (ä¾‹å¦‚ï¼šsetTimeout or requestAnimationFrame callbacks)</li> <li>æœåŠ¡ç«¯æ¸²æŸ“ (Server side rendering)</li> <li>é”™è¯¯è¾¹ç•Œæœ¬èº«(è€Œä¸æ˜¯å­ç»„ä»¶)æŠ›å‡ºçš„é”™è¯¯</li></ul></li></ul></li></ul> <h3 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="header-anchor">#</a> ä½¿ç”¨</h3> <blockquote><p><a href="https://juejin.im/post/5df648836fb9a016526eba01" target="_blank" rel="noopener noreferrer">ä½ çœŸçš„äº†è§£ React ç”Ÿå‘½å‘¨æœŸå—<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a><br> <a href="https://zh-hans.reactjs.org/blog/2018/06/07/you-probably-dont-need-derived-state.html#preferred-solutions" target="_blank" rel="noopener noreferrer">ä½ å¯èƒ½ä¸éœ€è¦ä½¿ç”¨æ´¾ç”Ÿ state<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote> <ul><li>å‘èµ· ajax è¯·æ±‚ï¼Œè·å–æ•°æ® <code>componentDidMount</code></li> <li>ä½¿ç”¨ refs è·å–çœŸå® DOM <code>componentDidMount</code></li> <li>å°† <code>props</code> å˜æˆ å†…éƒ¨ <code>state</code>: <code>static getDerivedStateFromProps</code></li> <li>æ§åˆ¶ç»„ä»¶æ˜¯å¦æ›´æ–° <code>shouldComponentUpdate</code> <code>return true | false</code></li> <li>å½“å¤–éƒ¨çš„ props æ”¹å˜æ—¶ï¼Œå¦‚ä½•å†æ¬¡æ‰§è¡Œè¯·æ±‚æ•°æ®ã€æ›´æ”¹çŠ¶æ€ç­‰æ“ä½œ
<ul><li><p>ä½¿ç”¨ <s><code>componentWillReceiveProps</code></s></p></li> <li><p>ä½¿ç”¨ <code>static getDerivedStateFromProps</code> + <code>componentDidUpdate</code> åŠ è½½æ•°æ®</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>  <span class="token keyword">class</span> <span class="token class-name">ExampleComponent</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
    state <span class="token operator">=</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">externalData</span><span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token keyword">static</span> <span class="token function">getDerivedStateFromProps</span><span class="token punctuation">(</span><span class="token parameter">nextProps<span class="token punctuation">,</span> prevState</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>nextProps<span class="token punctuation">.</span>id <span class="token operator">!==</span> prevState<span class="token punctuation">.</span>prevId<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">{</span>
          <span class="token literal-property property">externalData</span><span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
          <span class="token literal-property property">prevId</span><span class="token operator">:</span> nextProps<span class="token punctuation">.</span>id<span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token function">componentDidMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">_loadAsyncData</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// å€ŸåŠ© componentDidUpdate</span>
    <span class="token function">componentDidUpdate</span><span class="token punctuation">(</span><span class="token parameter">prevProps<span class="token punctuation">,</span> prevState</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>externalData <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">_loadAsyncData</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token function">componentWillUnmount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>_asyncRequest<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>_asyncRequest<span class="token punctuation">.</span><span class="token function">cancel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>externalData <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// Render loading state ...</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token comment">// Render real UI ...</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token function">_loadAsyncData</span><span class="token punctuation">(</span><span class="token parameter">id</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>_asyncRequest <span class="token operator">=</span> <span class="token function">asyncLoadData</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>
        <span class="token parameter">externalData</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span>_asyncRequest <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>externalData<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br></div></div></li> <li><p>ä½¿ç”¨ <code>static getDerivedStateFromProps</code> æ›´æ”¹çŠ¶æ€</p></li> <li><p>åªç”¨ <code>componentDidUpdate</code> çš„å†™æ³•</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>  <span class="token function">componentDidUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>age <span class="token operator">!==</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>age<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;componentDidUpdate&quot;</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>age <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div></li></ul></li></ul></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/xuan-zhang/Notes/edit/master/docs/React/index.md" target="_blank" rel="noopener noreferrer">åœ¨GitHubä¸­ç¼–è¾‘æ­¤é¡µé¢ï¼</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">æœ€åæ›´æ–°æ—¶é—´:</span> <span class="time">2020/6/28 09:58:14</span></div></footer> <div class="page-nav"><p class="inner"><!----> <span class="next"><a href="/Notes/React/eslint.html">
        é…ç½® Eslint  Prettier
      </a>
      â†’
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/Notes/assets/js/app.e773d1be.js" defer></script><script src="/Notes/assets/js/2.6c1319ac.js" defer></script><script src="/Notes/assets/js/1.5a5e16a8.js" defer></script><script src="/Notes/assets/js/17.8b0b4db8.js" defer></script>
  </body>
</html>

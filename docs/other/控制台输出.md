# 终端控制台命令

## 浏览器控制台输出

| 点位符 | 说明 |
| ------ | ------- |
| `%s` | 字符串输出 |
| `%d` `%i` | 整数输出 |
| `%f` | 符点数输出 |
| `%o` | 打印javascript对象，可以是整数、字符串以及JSON数据 |
| `%c` | 样式 |

### demo

```js
console.log("%cMy stylish message", "color: red; font-style: italic");

console.log("%c3D Text", `text-shadow: 0 1px 0 #ccc,0 2px 0 #c9c9c9,0 3px 0 #bbb,0 4px 0 #b9b9b9,0 5px 0 #aaa,0 6px 1px rgba(0,0,0,.1),0 0 5px rgba(0,0,0,.1),0 1px 3px rgba(0,0,0,.3),0 3px 5px rgba(0,0,0,.2),0 5px 10px rgba(0,0,0,.25),0 10px 10px rgba(0,0,0,.2),0 20px 20px rgba(0,0,0,.15);font-size:5em`);

console.log('%cRainbow Text ', `background-image:-webkit-gradient( linear, left top, right top, color-stop(0, #f22),color-stop(0.15, #f2f), color-stop(0.3, #22f), color-stop(0.45, #2ff), color-stop(0.6, #2f2),color-stop(0.75, #2f2), color-stop(0.9, #ff2), color-stop(1, #f22) );color:transparent;-webkit-background-clip: text;font-size:5em;`);

console.log("%c\n       ", `font-size:140px;background:url('https://t7.baidu.com/it/u=3204887199,3790688592&fm=79&app=86&size=h300&n=0&g=4n&f=jpeg?sec=1597818881&t=d77b12d791104e06c7ddfc3e4b076399')no-repeat`);

```

## linux终端控制台输出

### 颜色

| 前景色（字体色）| 背景色 | 颜色 |
| ------- | ------ | ------- |
| 30 | 40 | 黑 |
| 31 | 41 | 红 |
| 32 | 42 | 绿 |
| 33 | 43 | 黄 |
| 34 | 44 | 蓝 |
| 35 | 45 | 紫 |
| 36 | 46 | 深绿 |
| 37 | 47 | 白色 |
| 39 | 49 | 默认色 |

### ANSI控制码

#### 进制

+ `\0`: 8进制
+ `\x`: 16进制
+ `\033 == \x1b`

#### 控制字符

| Hex | 字符 | 描述 |
| ------ | ------ | ------ |
| `\x00` | `\0` | Null |
| `\x05` |  | ENQ 触发应答消息 |
| `\x07` | `\a` | Bell 响铃，当你在terminal中做某些无效操作的时候，返回\x07 |
| `\x08` | `\b` | BackSpace 退格键（发送退格键，if 在行首返回\x07 else 返回\x08\x1b[K,具体含义见后续） |
| `\x09` | `\t` | Horizontal Tab 横向跳至下一个制表位，若后面没有制表位，则跳至行尾 |
| `\x0a` | `\n` | Line Feed 光标下移一行（终端中表现为换行） |
| `\x0b` | `\v` | Vertical Tab 竖向跳至下一个制表位（终端中表现为换行） |
| `\x0c` | `\f` | Form Feed 光标跳转至下一页头部（终端中表现为换行） |
| `\x0d` | `\r` | Carriage Return 回车换行 |
| `\x0e` |  | SO 激活 G1 字符集 |
| `\x0f` |  | SI 激活 G0 字符集 |
| `\0x11` | `\q` | DC1 继续传送 |
| `\0x13` | `\s` | DC3 忽略除XOFF 和 XON 以外的一切字符 |
| `\x18` |  | CAN 实质 Ctrl+X 中断转义序列/进程 |
| `\x1a` | `\z` | SUB(EOF) 实质 Ctrl+Z 中断转义序列/进程 |
| `\x1b` | `\e` | Escape 开始一个新的转义序列 |
| `\x7f` |  | DEL 忽略 |
| `\x9b` |  | CSI 控制序列；等同于 ESC[ (\x1b[) |

#### ESC 非转义控制序列

| `ESC` |  | 描述 |
| ------ | ------ | ------ |
| `\x1bc` | `RIS` | 重绘屏幕，清屏，类似linux命令clear(注意大小写) |
| `\x1bD` | `IND` | 光标下移一行，不改变其列 |
| `\x1bE` | `NEL` | 换新的一行，类似 ‘\n’ |
| `\x1bH` | `HTS` | 设置当前列为制表位，类似 ‘\t’ |
| `\x1bM` | `RI` | 反转换行，光标上移一行，不改变其列 |
| `\x1bZ` | `DECID` | DEC私有定义，ubuntu内核释义为返回字符ESC[?6c |
| `\x1b7` | `DECSC` | 存储当前状态（光标位置，属性，字符集） |
| `\x1b8` | `DECRC` | 恢复存储设置 |
| `\x1b[` | `CSI` | 控制序列介绍 |
| `\x1b%n` |  | 开始一个字符集选择序列，n可为@，G。@代表默认值（ISO 646/ISO 8859-1）,G代表UTF-8 |
| `\x1b#8` | `DECALN` | DEC 屏幕校准测试，使用E’s 填充整个终端？？ |
| `\x1b(n` |  | 开始一个G0字符集定义序列，n可为B,0,U,K. B代表默认字符集（ISO 8859-1 mapping）；0代表vt100图形映射；U代表空映射，直接访问字符ROM；K代表用户映射，由mapscrn(8)加载。 |
| `\x1b)n` |  | 开始一个G1字符集定义序列，n可选值及效果同上 |
| `\x1b>` | `DECPNM` | 设置数字小键盘模式 |
| `\x1b=` | `DECPAM` | 设置程序键盘模式 |
| `\x1b]` | `OSC` | (是perating system command的缩写 ESC ] P nrrggbb: 设置调色板,后面紧跟7个十六进制数,再跟一个 P :- /(. 这里 n 是颜色(0-16),而 rrggbb 表示红/绿/蓝 值(0-255).ESC ] R: 重置调色板 |

#### ESC 控制转义序列

> ESC[后面跟的参数序列多为由分号隔开的十进制数，缺省值通常为0

+ 屏幕属性命令

| CSI | 说明 |
| ------ | ------ |
| `\x1b[12h` | 禁止本端回显，键盘数据仅送给主机 |
| `\x1b[12l` | 允许本端回显，键盘数据送给主机和屏幕 |
| `\x1b[?5h` | 屏幕显示为白底黑字 |
| `\x1b[?5l` | 显示为黑底白字 |
| `\x1b[?3h` | 132列显示 |
| `\x1b[?3l` | 80列显示 |
| `\x1b[?6h` | 以用户指定的滚动区域的首行行首为参考原点 |
| `\x1b[?6l` | 以屏幕的首行行首为参考原点 |
| `\x1b[?7h` | 当字符显示到行末时，自动回到下行行首接着显示；如果在滚动区域底行行末，则上滚一行再显示 |
| `\x1b[?7l` | 当字符显示到行末时，仍在行末光标位置显示，覆盖原有的字符，除非接收到移动光标的命令 |
| `\x1b[?4h` | 平滑滚动 |
| `\x1b[?4l` | 跳跃滚动 |
| `\x1b[/0s` | 不滚动 |
| `\x1b[/1s` | 平滑慢滚 |
| `\x1b[/2s` | 跳跃滚动 |
| `x1b[/3s` | 平滑快滚 |
| `\x1b[3h` | 监督有效，显示控制符，供程序员调试程序用 |
| `\x1b[3l` | 监督无效，执行控制符，正常运行程序 |
| `\x1b[0$~` | 禁止状态行（VT300有效) |
| `\x1b[1$~` | 允许状态行（VT300有效）|
| `\x1b[2$~` | 主机可写状态行（VT300有效) |
| `\x1b[0$|` | 主机可写状态行时，在主屏显示数据（VT300有效）|
| `\x1b[1$|` | 主机可写状态行时，在状态行显示数据（VT300有效）|

+ 光标命令

| CSI | 说明 |
| ------ | ------ |
| `\x1b[?25h` | 光标显示 |
| `\x1b[?25l` | 光标消隐 |
| `\x1b[/0j"` | 闪烁块光标 |
| `\x1b[/1j` | 闪烁线光标 |
| `\x1b[/2j` | 稳态块光标 |
| `\x1b[/3j` | 稳态线光标 |
| `\x1bH` | 在当前列上设置制表位 |
| `\x1b[g` | 清除当前列上的制表位 |
| `\x1b[0g` | 清除当前列上的制表位 |
| `\x1b[3g` | 清除所有列上的制表位 |
| `\x1b\x45` | 光标下移1行 |
| `\x1b\x4d` | 光标上移1行 |
| `\x1b\x37` | 保存终端当前状态 |
| `\x1b\x38` | 恢复上述状态 |

+ 行属性和字符属性命令

| CSI | 说明 |
| ------ | ------- |
| `\x1b#3` | 设置当前行为倍宽倍高（上半部分） |
| `\x1b#4` | 设置当前行为倍宽倍高（下半部分） |
| `\x1b#5` | 设置当前行为单宽单高 |
| `\x1b#6` | 设置当前行为倍宽单高 |

+ 编缉命令

| CSI | 说明 |
| ------ | ------- |
| `\x1b[%dA` | 光标上移, 不改变列位置，若已在顶层，忽略不计 |
| `\x1b[%dB` | 光标下移, 不改变列位置，若已在底层，忽略不计 |
| `\x1b[%dC` | 光标右(前)移, 不改变行，若已在最左侧，忽略不计 |
| `\x1b[%dD` | 光标左(后)移,其中'%d'是对应的偏移的尺寸, 不改变行，若已在最右侧，忽略不计 |
| `\x1b[nE` | n为整数（默认为1），光标移到下面第n行行首 |
| `\x1b[nF` | n为整数（默认为1），光标移到上面第n行行首 |
| `\x1b[nG` | n为整数（默认为1）光标移动到第n列。 |
| `\x1b[4h` | 插入方式：新显示字符使光标位置后的原来显示字符右移，移出边界的字符丢失。 |
| `\x1b[4l` | 替代方式：新显示字符替代光标位置字符显示 |
| `\x1b[L` | 在空行插入# ？？|
| `\x1b[M` | 删除#标记的行 ？？ |
| `\x1b[P` | 删除当前行中#标记的字符 ?? |
| `\x1b[nS` | n为整数（默认为1），整页向上滚动n行 |
| `\x1b[nT` | n为整数（默认为1），整夜向下滚动n行 |
| `\x1b[X` | 删除当前行中#标记的单词 ？？ |
| `\x1b[nK` | n可选0，1，2，默认为0。为0时，从光标位置到该行行尾擦除；为1时，从该行行首到光标位置擦除；为2时，擦除整行。该操作对行属性无影响。 |
| `\x1b[K` | 清除光标至行末字符，包括光标位置，行属性不受影响。 |
| `\x1b[0K` | 清除光标至行末字符，包括光标位置，行属性不受影响。 |
| `\x1b[1K` | 清除行首至光标位置字符，包括光标位置，行属性不受影响。 |
| `\x1b[2K` | 清除光标所在行的所有字符 |
| `\x1b[nJ` | n可选0，1，2，3，默认为0。为0时，从光标位置到屏幕末尾擦除；为1时，从屏幕首部到光标位置擦除；为2时，擦除全屏；为3时，擦除全屏，并清空缓存区。该操作，对整行被清除的行属性变为单宽单高。 |
| `\x1b[J` | 清除从光标至屏末字符，整行被清的行属性变成单宽单高 |
| `\x1b[0J` | 清除从光标至屏末字符，整行被清的行属性变成单宽单高 |
| `\x1b[1J` | 清除从屏首至光标字符，整行被清的行属性变成单宽单高 |
| `\x1b[2J` | 清除整个屏幕，行属性变成单宽单高，光标位置不变 |
| `\x1b[?nK` | 该指令基本同`\x1b[nK`，只清除”可清除“字符，不影响其它字符及行属性。 |
| `\x1b[?K` | 清除光标至行末的"可清除"字符，不影响其它字符和行属性 |
| `\x1b[?0K` | 清除光标至行末的"可清除"字符，不影响其它字符和行属性 |
| `\x1b[?1K` | 清除行首至光标位置的"可清除"字符，不影响其它字符和行属性 |
| `\x1b[?2K` | 清除光标所在行的所有"可清除"字符，不影响其它字符和行属性 |
| `\x1b[?nJ` | 该指令基本同 `\x1b[nJ`，只清除”可清除“字符，不影响其它字符及行属性。 |
| `\x1b[?J` | 清除从光标至屏末的"可清除"字符，不影响其它字符和行属性 |
| `\x1b[?0J` | 清除从光标至屏末的"可清除"字符，不影响其它字符和行属性 |
| `\x1b[?1J` | 清除从屏首至光标的"可清除"字符，不影响其它字符和行属性 |
| `\x1b[?2J` | 清除整个屏幕中的"可清除"字符，不影响其它字符和行属性 |
| `\x1b[a` | 光标移动到#标记的右边 ？？ |
| `\x1b[c` | 以 ESC[?6C：处理 |
| `\x1b[nd` | n为整数（默认为1），光标移动到当前列指定行 |
| `\x1b[e` | 光标移动到#标记的下一行 ？？ |
| `\x1b[f` | 光标移动到指定的行和列（与\x1b[H类似） |
| `\x1b[ng` | n可为0，3（默认为0）. 为0时，删除当前位置的制表符，为3时，删除所以制表符。 |
| `\x1b[nh` | 设置模式，详见下文 |
| `\x1b[ni` | 辅助串行端口，常用于本地打印机，n为5代表启用，4代表禁用 |
| `\x1b[nl` | 重置模式，详见下文，其功能与\x1b[nh相对 |
| `\x1b[m` | 选择图形再现（设置文字属性），详见下文 |
| `\x1b[n` | 状态报告，详见下文 |
| `\x1b[nq` | 设置键盘指示灯，n可取0，1，2，3. 0代表熄灭所有灯，1代表点亮scroll lock灯，2代表点亮Num Lock 灯，3代表点亮Caps Lock灯。 |
| `\x1b[n;mr` | 设置滚动范围；n,m参数分别为首行和末行 |
| `\x1b[y;xH` | 设置光标位置 y: 行 x: 列|
| `\x1b[s` | 存储光标位置 |
| `\x1b[u` | 恢复光标位置 |
| `\x1b[n` | n为整数（默认为1），光标移动到当前行指定列 |

+ 键盘

| CSI | 说明 |
| ------ | ------- |
| `\x1b[2h` | 锁存键盘数据（不超过15个）暂停向主机发送，直到开放为止。 |
| `\x1b[2l` | 允许键盘向主机发送数据。 |
| `\x1b[?8h` | 键盘连发有效 |
| `\x1b[?8l` | 键盘连发无效 |
| `\x1b[5h` | 击键声有效 |
| `\x1b[5l` | 击键声无效 |
| `\x1b[?1h` | 光标键产生"应用"控制序列。见键盘代码一节。 |
| `\x1b[?1l` | 光标键产生ANSI标准的控制序列。见键盘代码一节。 |
| `\x1b=` | 副键盘产生"应用"控制序列。见键盘代码一节。 |
| `\x1b>` | 副键盘产生数字等字符序列，PF键不变。见键盘代码一节。 |
| `\x1b[20h` | 接收LF、FF或VT控制码后，光标移至下一行行首；Return键发送CR和LF控制码。 |
| `\x1b[20l` | 接收LF、FF或VT控制码后，光标移至下一行当前列；Return键发送CR控制码。 |
| `\x1b[?67h` | 作为退格键发送BS。 |
| `\x1b[?67l` | 作为删除键发送DEL。 |
| `\x1b[/2h` |  顶排功能键作为应用程序功能使用CTRL功能键作为本端功能键使用 |
| `\x1b[/2l` | 顶排功能键作为本端功能键使用CTRL功能键作为应用程序功能使用 |

+ `\x1b[h` 与 `\x1b[l` (小写 L) 指令一览

| 指令 | 描述 |
| ------- | ------ |
| `ECMA-48 模式选择` |  |
| `\x1b[2h` | 锁存键盘数据（不超过15个）暂停向主机发送，直到开放为止。 |
| `\x1b[2l` | 允许键盘向主机发送数据。 |
| `\x1b[3h` | 打开显示控制字符，供调试使用 |
| `\x1b[3l` | 取消显示控制字符，正常运行 |
| `\x1b[4h` | 设置插入模式（INSERT MODE, 输入内容替换光标所在位置的内容） |
| `\x1b[4l` | 取消插入模式 |
| `\x1b[5h` | 击键声有效 |
| `\x1b[5l` | 击键声无效 |
| `\x1b[20h` | 在CR ("\r"）后自动添加LF,VT或FF("\n") |
| `\x1b[20l` | 取消自动添加 |
| `以下内容为DEC 私有模式序列` | l替换h即为重设该模式，以下不重复例举，具体形式参考上述部分 |
| `\x1b[?1h` | 打开时光标键送出ESC O 前缀，(默认ESC [) |
| `\x1b[?3h` | 选择132列模式（默认80列） |
| `\x1b[?4h` | 设置平滑滚动（默认跳跃滚动） |
| `\x1b[?5h` | 显示反转，显示为白底黑字（默认黑底白字） |
| `\x1b[?6h` | 以用户指定的滚动区域的首行行首为参考原点（默认以屏幕首行行首为原点） |
| `\x1b[?7h` | 打开自动换行，超过设定列数自动换行（默认到行尾覆盖原有文字） |
| `\x1b[?8h` | 允许键盘连发 |
| `\x1b[?9h` | 设置x10鼠标报告模式1（或重设为0）（默认关闭） |
| `\x1b[?25h` | 设置光标可见（默认可见，l 隐藏） |
| `\x1b[?67h` | 作为退格键发送BS(默认作为删除键发送DEL) |
| `\x1b[?1000h` | 设置x11鼠标报告模式2（或重设为0）（默认关闭） |
| `以下部分为终端屏幕尺寸设置` | 除了\x1b[=7h,其余指令都可以通过\x1b[=nl重置，n为对应值 |
| `\x1b[=0h` | 显示为 40*25 黑白 文本 |
| `\x1b[=1h` | 显示为 40*25 彩色 文本 |
| `\x1b[=2h` | 显示为 80*25 黑白 文本 |
| `\x1b[=3h` | 显示为 80*25 彩色 文本 |
| `\x1b[=4h` | 显示为 320*400 四色 图像 |
| `\x1b[=5h` | 显示为 320*200 黑白 图像 |
| `\x1b[=6h` | 显示为 640*200 黑白 图像 |
| `\x1b[=7h` | 允许自动换行 |
| `\x1b[=13h` | 显示为 320*200 彩色 图像 |
| `\x1b[=14h` | 显示为 640*200 16色 图像 |
| `\x1b[=15h` | 显示为 640*350 黑白 图像 |
| `\x1b[=16h` | 显示为 640*350 16色 图像 |
| `\x1b[=17h` | 显示为 640*480 黑白 图像 |
| `\x1b[=18h` | 显示为 640*480 16色 图像 |
| `\x1b[=19h` | 显示为 320*200 256色 图像 |

+ ECMA-48 状态报告命令

| 指令 | 描述 |
| ------ | ------ |
| `\x1b[5n` | 设备状态报告（DSR）:以 ESC [ 0 n 应答 |
| `\x1b[6n` | 光标位置报告（CDR）:以 ESC [ y;x R应答，x,y为光标位置 |
| `\x1b[?15n` | 报告打印机状态，应答内容 （ESC[?13n 无打印机；ESC[?10n打印机就绪；ESC[?11n 未准备好。） |
| `\x1b[?25n` | 报告自定义键状态，应答内容（ESC[?20n 允许； ESC[?21n锁定） |

+ SGR 参数意义 `\x1b[…m`

> SGR指令能够在一条指令中添加多个属性，例如\x1b[5;9;30;41m 即为设置闪烁，下划线，黑色字体红色背景。
> 在Xterm， KDE 的konsole，以及支持libvte的终端上支持如下指令：
> `\x1b[38;2;r;g;bm` 选择RGB前景色
> `\x1b[48;2;r;g;bm` 选择RGB背景色

| 指令 | 描述 |
| ------ | ------ |
| `\x1b[0m` | 所有属性重设为默认值，通常出现在一串指令的最后 |
| `\x1b[1m` | 设置粗体，高亮 |
| `\x1b[2m` | 设置亮度减半(用一种颜色模拟另一种颜色) |
| `\x1b[4m` | 设置下划线，下划线的颜色由”\x1b]…“设置 |
| `\x1b[5m` | 设置闪烁 |
| `\x1b[7m` | 设置反显，前景色与背景色交换（字体颜色与背景颜色） |
| `\x1b[8m` | 隐藏，前景色与背景色同色 |
| `\x1b[9m` | 设置删除线（示例效果：谁也逃不过王境泽定律 ） |
| `\x1b[10m` | 重设选定映像,显示控制标记,反转元素标记 |
| `\x1b[11m` | 选择空映像,设置显示控制标记,重设反转标记. |
| `\x1b[12m` | 选择空映像,设置显示控制标记,重设反转标记.(在完成映像表转换之前反转标记引起每一字节的高位反转.) |
| `\x1b[21m` | 设置正常亮度（与ECMA-48 不兼容） |
| `\x1b[22m` | 设置正常亮度 |
| `\x1b[24m` | 关闭下划线 |
| `\x1b[25m` | 关闭闪烁 |
| `\x1b[27m` | 关闭反显 |
| `\x1b[28m` | 关闭影藏 |
| `\x1b[29m` | 关闭删除线 |
| `\x1b[30-37m` | 30：黑色前景；31：红色前景；32：绿色前景；33：棕色前景；34：蓝色前景；35：品红前景；36：孔雀蓝前景；37：白色前景 |
| `\x1b[38m` | 设置RGB前景色 |
| `\x1b[39m` | 设置默认前景色 |
| `\x1b[40-47m` | 40:黑色背景；41：红色背景；42：绿色背景；43：棕色背景；44：蓝色背景；45：品红背景；46：孔雀蓝背景；47：白色背景 |
| `\x1b[48m` | 设置RGB背景色 |
| `\x1b[53m` | 设置上划线 |
| `\x1b[55m` | 关闭上划线 |
| `\x1b[90-97m` | 设置前景色，颜色同30-37，亮度提升 |
| `\x1b[100-107m` | 设置背景色，颜色同41-47，亮度提升 |

+ 其它

| CSI | 说明 |
| ------ | ------- |
| `\x1b[0m` | 关闭所有属性 |
| `\x1b[1m` | 设置高亮度 |
| `\x1b[4m` | 下划线 |
| `\x1b[5m` | 闪烁 |
| `\x1b[7m` | 反显 |
| `\x1b[8m` | 消隐 |
| `\x1b[30m` -- `\x1b[37m` | 设置前景色 |
| `\x1b[40m` -- `\x1b[47m` | 设置背景色 |
| `\x1b[nA` | 光标上移n行 |
| `\x1b[nB` | 光标下移n行 |
| `\x1b[nC` | 光标右移n行 |
| `\x1b[nD` | 光标左移n行 |
| `\x1b[2J` | 清屏 |
| `\x1b[K` | 清除从光标到行尾的内容 |
| `\x1b[s` | 保存光标位置 |
| `\x1b[u` | 恢复光标位置 |
| `\x1b[?25l` | 隐藏光标 |
| `\x1b[?25h` | 显示光标 |

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>
<body>
    <canvas id="canvas" width="140" height="140" data-percent="79"></canvas>
    <hr>
    <canvas id="mycan" height="600" width="600" style="background: #52c0a0;"></canvas>
    <script>
        var canvas = document.getElementById('canvas');
        var ctx = canvas.getContext('2d');
        var height = canvas.height;
        var width = canvas.width;
        var circle = parseInt(canvas.getAttribute('data-percent'));
        var PI = Math.PI;
        var i = 0;

        var time = setInterval(function () {
            ctx.save();
            ctx.clearRect(0, 0, width, height);
            ctx.translate(width / 2, height / 2);
            // 画底圆
            ctx.beginPath();
            ctx.strokeStyle = "#eaeaea";
            ctx.lineWidth = 8;
            ctx.arc(0, 0, width / 2 - 4, 0, 2 * PI);
            ctx.stroke();
            ctx.closePath();

            // 添加文本
            ctx.font = "bold 30px 微软雅黑";
            ctx.textAlign = 'center';
            ctx.textBaseline = "middle";
            ctx.fillStyle = "#0db6b4";
            ctx.fillText(Math.floor(i/360*100) + "%", 0, 0);

            // 画外圆
            ctx.rotate(-Math.PI / 2);
            ctx.beginPath();
            ctx.strokeStyle = "#0db6b4";
            ctx.lineWidth = 8;
            ctx.lineCap = "round";
            ctx.arc(0, 0, width / 2 - 4, 0, i * PI / 180);
            if (i == Math.ceil(360 * circle / 100)) {
                clearInterval(time);
            }
            i++;
            ctx.stroke();
            ctx.closePath();

            ctx.restore();
        }, 10)
    </script>

    <script>
        // 获取节点与上下文
        var oCan = document.querySelector('#mycan');
        console.log(oCan);
        var g = oCan.getContext('2d');
        var d = Math.PI;
        var n = 270;
        var m = 1;
       var newTime = setInterval(function () {
            g.save();
            g.clearRect(0, 0, 600, 600);
            g.translate(300, 300);
            // 外细圆
            g.beginPath();
            g.strokeStyle = '#fff';
            g.lineWidth = 2;
            g.arc(0, 0, 100, 0, 2 * d, false);
            g.stroke();

            // 进度条
            g.beginPath();
            g.strokeStyle = '#fff';
            g.lineWidth = 10;
            g.arc(0, 0, 100, d / 180 * 270, d / 180 * n, false);
            if (n > 360 + 270) {
                m = -1;
            }
            if (n < 271) {
                m = 1;
            }
            n += m;
            g.stroke();
            // 文字
            var str = parseInt((n - 270) / 360 * 100);
            g.beginPath();
            g.lineWidth = 1;
            g.font = '50px 微软雅黑';
            g.textAlign = 'center';
            g.textBaseline = 'middle';
            g.strokeText(str + '%', 0, 0);
            g.restore();
        }, 1000 / 50);


    </script>
</body>

</html>